<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.xzx.mapper.MovieExtendMapper">

    <resultMap id="BaseResultMap" type="com.xzx.entity.Movie">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Dec 11 17:11:59 CST 2019.
        -->
        <id column="movie_id" jdbcType="INTEGER" property="id" />
        <result column="title" jdbcType="VARCHAR" property="title" />
        <result column="duration" jdbcType="INTEGER" property="duration" />
        <result column="release_time" jdbcType="DATE" property="releaseTime" />
        <result column="release_area" jdbcType="VARCHAR" property="releaseArea" />
        <result column="technology" jdbcType="VARCHAR" property="technology" />
        <result column="type" jdbcType="VARCHAR" property="type" />
        <result column="second_type" jdbcType="VARCHAR" property="secondType" />
        <result column="boxoffice" jdbcType="REAL" property="boxoffice" />
        <result column="first_boxoffice" jdbcType="REAL" property="firstBoxoffice" />
        <result column="actor" jdbcType="VARCHAR" property="actor" />
        <result column="issue_company" jdbcType="VARCHAR" property="issueCompany" />
        <result column="manu_company" jdbcType="VARCHAR" property="manuCompany" />
        <result column="is_ip" jdbcType="BIT" property="isIp" />
        <result column="is_sequel" jdbcType="BIT" property="isSequel" />
        <result column="is_network" jdbcType="BIT" property="isNetwork" />
    </resultMap>
    <select id="getMovieByActorId" resultMap="BaseResultMap" parameterType="Integer">
        select * from actor_participate ap, movie_table m where ap.actor_id = #{actorId} and ap.movie_id = m.id
    </select>

    <select id="getMovieByDirectorId" resultMap="BaseResultMap" parameterType="Integer">
        select * from d_s_participate dsp, movie_table m where dsp.person_occu = 1 and dsp.person_id = #{directorId} and dsp.movie_id = m.id
    </select>

    <select id="getMovieByScenaristId" resultMap="BaseResultMap" parameterType="Integer">
        select * from d_s_participate dsp, movie_table m where dsp.person_occu = 2 and dsp.person_id = #{scenaristId} and dsp.movie_id = m.id
    </select>

    <insert id="insertMulti" parameterType="List">
        <!--
          WARNING - @mbg.generated
          This element is automatically generated by MyBatis Generator, do not modify.
          This element was generated on Wed Dec 11 17:11:59 CST 2019.
        -->
        insert into movie_table (id, title, duration,
        release_time, release_area, technology,
        type, second_type, boxoffice,
        first_boxoffice, actor, issue_company,
        manu_company, is_ip, is_sequel,
        is_network)

        values
        <foreach collection="list" item="movie" separator=",">
        (#{movie.id,jdbcType=INTEGER}, #{movie.title,jdbcType=VARCHAR}, #{movie.duration,jdbcType=INTEGER},
        #{movie.releaseTime,jdbcType=DATE}, #{movie.releaseArea,jdbcType=VARCHAR}, #{movie.technology,jdbcType=VARCHAR},
        #{movie.type,jdbcType=VARCHAR}, #{movie.secondType,jdbcType=VARCHAR}, #{movie.boxoffice,jdbcType=REAL},
        #{movie.firstBoxoffice,jdbcType=REAL}, #{movie.actor,jdbcType=VARCHAR}, #{movie.issueCompany,jdbcType=VARCHAR},
        #{movie.manuCompany,jdbcType=VARCHAR}, #{movie.isIp,jdbcType=BIT}, #{movie.isSequel,jdbcType=BIT},
        #{movie.isNetwork,jdbcType=BIT})
        </foreach>
    </insert>


</mapper>